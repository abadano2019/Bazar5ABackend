<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
      function requestLogOut(req, res) {
        return $.ajax({
          type: "GET",
          url: "http://localhost:3000/users/logout/",
          async: true,
        }).responseText;
      }
      window.onbeforeunload = () => {
        let ok = sessionStorage.getItem("session");
        if (!(ok === "ok")) {
          requestLogOut();
        }
        return null;
      };

      function RTLProducts(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/realtimeproducts";
      }

      function requestCleanUsers(req, res) {
        sessionStorage.setItem("session", "ok");
        return $.ajax({
          type: "DELETE",
          url: "http://localhost:3000/users/",
          async: true,
        }).responseText;
      }

      function cleanUsers() {
        requestCleanUsers();
        alert("Process clean users complete")
      }

      function RTLProductsAdmin(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/realtimeproducts2";
      }

      function listProducts(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views";
      }

      function chat(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/chat";
      }

      function upFileProfile(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/upfile_profiles";
      }

      function upFileProducts(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/upfile_products";
      }

      function upFileDocuments(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/upfile_documents";
      }

      function upFile(req, res) {
        sessionStorage.setItem("session", "ok");
        window.location.href = "http://localhost:3000/views/upfile";
      }
    </script>

    <h1>MENU</h1>
    <ul>
      <li>
        <button onclick="upFile()">Upfile</button>
      </li>
      <br>
      <li>
        <button onclick="upFileDocuments()">Upfile Documents</button>
      </li>
      <br>
      <li>
        <button onclick="upFileProducts()">Upfile Products</button>
      </li>
      <br>
      <li>
        <button onclick="upFileProfile()">Upfile Profiles</button>
      </li>
      <br>
      <li>
        <button onclick="chat()">Chat</button>
      </li>
      <br>
      <li>
        <button onclick="listProducts()">List Products</button>
      </li>
      <br>
      <li>
        <button onclick="RTLProductsAdmin()">Products administrator</button>
      </li>
      <br>
      <li>
        <button onclick="RTLProducts()">Real Time List Products</button>
      </li>
      <br>
      <li>
        <button onclick="cleanUsers()">Clean Users</button>
      </li>
    </ul>
    <br>
    <button onclick="location.href='/users/logout'">LOGOUT</button>
  </body>
  <footer></footer>
</html>
